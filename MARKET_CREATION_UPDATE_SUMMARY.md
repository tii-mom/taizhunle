# 预测创建限制系统 - 更新总结

## ✅ 更新完成

所有代码和文档已更新，添加了预测创建限制系统。

---

## 📋 核心规则

### 创建频率限制

| 用户类型 | 积分 | 等级 | 创建间隔 | 年度创建 |
|---------|------|------|---------|---------|
| 普通用户 | - | 无 | 360小时 (15天) | ~24次 |
| 武林新丁 | 0-99 | Lv.1 | 72小时 (3天) | ~120次 |
| 风尘奇侠 | 100-399 | Lv.2 | 48小时 (2天) | ~180次 |
| 地狱判官 | 400-999 | Lv.3 | 24小时 (1天) | ~365次 |
| 天上天下天地无双 | 1000+ | Lv.4 | 6小时 | ~1,460次 |

### 创建费用

```
总费用 = 100 TAI + TON Gas 费

- 100 TAI：进入 DAO 储备池
- Gas 费：约 0.3 TON（链上执行）
```

---

## 📝 已更新的文件

### 1. 新增文档 ✅

#### `MARKET_CREATION_LIMITS.md`
- 完整的创建限制系统设计
- 实现逻辑和算法
- UI 设计方案
- 数据库设计
- API 设计

### 2. 工具函数 ✅

#### `src/utils/dao.ts`
新增函数：
```typescript
// 获取创建间隔
getCreateInterval(points, isJuror): number

// 检查创建权限
canCreateMarket(lastCreateTime, points, isJuror): {
  canCreate, nextAvailableTime, intervalHours, hoursRemaining
}

// 获取创建费用
getCreateFee(): { tai, estimatedGas, total }
```

### 3. 国际化 ✅

#### `src/locales/zh/dao.json`
新增 `createLimits` 部分：
- 创建限制说明
- 各等级间隔
- 费用信息
- 冷却提示
- 余额不足提示

#### `src/locales/en/dao.json`
新增 `createLimits` 部分（英文版）

### 4. 设计文档 ✅

#### `DAO_JUROR_SYSTEM_DESIGN_V2.md`
新增章节：
- 预测创建限制系统
- 创建频率表格
- 创建费用说明
- 设计理念

#### `docs/INVESTOR_BRIEF.md`
新增章节：
- 预测创建限制机制
- 创建频率限制表格
- 创建费用说明
- 设计优势
- 预期效果

---

## 🎯 设计理念

### 1. 防止垃圾预测 🛡️
- **高门槛**：360小时 + 100 TAI
- **成本约束**：每次创建都需要付费
- **时间限制**：防止频繁创建

### 2. 鼓励成为陪审员 🎖️
- **特权激励**：陪审员享受更短间隔
- **等级特权**：等级越高，创建越频繁
- **正向循环**：参与陪审 → 获得积分 → 更多创建机会

### 3. 提升内容质量 ⭐
- **谨慎创建**：用户会更认真设计预测
- **质量优先**：避免随意创建
- **平台价值**：整体预测质量提升

### 4. 经济平衡 💰
- **DAO 储备**：100 TAI 进入储备池
- **奖励补充**：用于陪审员奖励
- **良性循环**：创建费 → 储备池 → 陪审奖励 → 更多参与

---

## 📊 预期效果

### 普通用户
```
创建频率：15天/次
年度创建：~24次
适合：偶尔创建高质量预测的用户
```

### 活跃陪审员 (Lv.2-3)
```
创建频率：1-2天/次
年度创建：180-365次
适合：定期创建优质内容的用户
```

### 顶级陪审员 (Lv.4)
```
创建频率：6小时/次
年度创建：~1,460次
适合：专业内容创作者
```

---

## 🔧 待实施功能

### Phase 1: 后端 API
- [ ] 创建权限检查 API
- [ ] 创建费用扣除逻辑
- [ ] 创建时间记录
- [ ] 余额检查

### Phase 2: 前端界面
- [ ] 创建按钮状态显示
- [ ] 冷却倒计时
- [ ] 费用明细展示
- [ ] 余额不足提示

### Phase 3: 数据库
- [ ] 添加 `last_market_created_at` 字段
- [ ] 添加 `total_markets_created` 字段
- [ ] 添加 `creation_fee` 字段
- [ ] 添加相关索引

---

## 💡 关键优势

### vs 无限制创建
| 对比项 | 无限制 | 有限制 |
|-------|--------|--------|
| 垃圾预测 | 泛滥 | 极少 |
| 内容质量 | 参差不齐 | 高质量 |
| 用户体验 | 信息过载 | 精选内容 |
| 平台价值 | 低 | 高 |

### vs 固定限制
| 对比项 | 固定限制 | 等级限制 |
|-------|---------|---------|
| 灵活性 | 低 | 高 |
| 激励性 | 无 | 强 |
| 用户分层 | 无 | 清晰 |
| 参与动力 | 低 | 高 |

---

## 🎉 总结

✅ **更新完成度：100%**

- 设计文档完整
- 工具函数实现
- 国际化完善
- 投资人简报更新

**核心价值**：
1. 防止垃圾预测
2. 提升内容质量
3. 鼓励成为陪审员
4. 经济良性循环

**下一步**：
实施后端 API 和前端界面

---

**完成时间**：2025-11-03  
**更新文件数**：6 个  
**新增代码行数**：~150 行  
**状态**：✅ 完成
