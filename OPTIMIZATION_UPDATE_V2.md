# é‚€è¯·è¿”åˆ© + å®æ—¶æ¦œå•æ·±åº¦ä¼˜åŒ– V2

## ğŸ”„ æ›´æ–°å†…å®¹ï¼ˆåŸºäºæ–°éœ€æ±‚ï¼‰

### 1. é‚€è¯·ä¸­å¿ƒ `/invite` è°ƒæ•´

#### âŒ ç§»é™¤å†…å®¹
- **è¿”åˆ©æ¢¯åº¦æ ç›®** - å·²å®Œå…¨ç§»é™¤ `InviteRewards` ç»„ä»¶

#### âœ… æ–°å¢/æ›´æ–°å†…å®¹

**A. é‚€è¯·æ•ˆæœï¼ˆæ·±åº¦è½¬åŒ–å¯è§†åŒ–ï¼‰**
- ç»„ä»¶åç§°ï¼š`InviteEffect.tsx`ï¼ˆåŸ `InviteFunnel.tsx`ï¼‰
- æ–‡æ¡ˆæ›´æ–°ï¼š
  - ä¸­æ–‡ï¼šã€Œé‚€è¯·æ•ˆæœã€/ã€Œæ·±åº¦è½¬åŒ–å¯è§†åŒ–ã€
  - è‹±æ–‡ï¼šã€ŒInvite Effectã€/ã€ŒDeep conversion visualizationã€
- åŠŸèƒ½ï¼šç‚¹å‡» â†’ æ³¨å†Œ â†’ ä¸‹æ³¨ â†’ ä½ èµš 1.5%
- å®æ—¶è·³åŠ¨ï¼š60 ç§’åˆ·æ–°

**B. é¢†å–æŒ‰é’®ï¼ˆé›†ä¸­é¢†å– + æ˜¾ç¤º gas è´¹ï¼‰**
- æ–‡æ¡ˆæ›´æ–°ï¼š
  - ä¸­æ–‡ï¼šã€Œè¯·é›†ä¸­é¢†å–ï¼Œä»…éœ€æ”¯ä»˜ä¸€æ¬¡ gas è´¹ã€
  - è‹±æ–‡ï¼šã€ŒClaim in batch, pay gas onceã€
- æ˜¾ç¤º gas è´¹ï¼š
  - æ–°å¢ gas è´¹æ˜¾ç¤ºåŒºåŸŸï¼ˆé‡‘è‰²é«˜äº®ï¼‰
  - æ ¼å¼ï¼šã€Œé¢„è®¡ gas è´¹ï¼š0.050 TONã€
  - ç”¨æˆ·è‡ªä»˜ gas
- æŒ‰é’®æ–‡æ¡ˆï¼š
  - ä¸­æ–‡ï¼šã€Œé›†ä¸­é¢†å–ã€
  - è‹±æ–‡ï¼šã€ŒClaim in Batchã€

### 2. æ¦œå•ä¸­å¿ƒ `/ranking` è°ƒæ•´

#### âœ… æ›´æ–°å†…å®¹

**A. å¤´éƒ¨æ¨ªå¹…æ–‡æ¡ˆ**
- ä¸­æ–‡ï¼šã€Œå®æ—¶è‹±é›„æ¦œï¼Œä½ è¡Œä½ ä¸Šæ¦œã€
- è‹±æ–‡ï¼šã€ŒLive Hero Board, You Can Be On Topã€
- å‰¯æ ‡é¢˜ï¼šã€Œå‰ 50 åå¯è§ Â· 60 ç§’åˆ·æ–°ã€

**B. æ¦œå•å¡ç‰‡ï¼ˆä¸åŒç±»å‹æ˜¾ç¤ºä¸åŒæ•°æ®ï¼‰**

1. **å¸ƒé“è€…æ¦œå•ï¼ˆEvangelist ğŸ§™ï¼‰**
   - åˆ—åï¼š`#` | `ç©å®¶` | `é‚€è¯·æ”¶ç›Š` | `å˜åŒ–`
   - æ•°æ®ï¼šå®æ—¶é‚€è¯·æ”¶ç›Šè·³åŠ¨ï¼ˆTAIï¼‰
   - ç¤ºä¾‹ï¼š`18,200 TAI`

2. **å¤§å¯Œè±ªæ¦œå•ï¼ˆWhale ğŸ’°ï¼‰**
   - åˆ—åï¼š`#` | `ç©å®¶` | `é¢„æµ‹æ”¶ç›Š` | `å˜åŒ–`
   - æ•°æ®ï¼šå®æ—¶é¢„æµ‹æ”¶ç›Šè·³åŠ¨ï¼ˆTAIï¼‰
   - ç¤ºä¾‹ï¼š`9,100 TAI`

3. **é¢„è¨€å®¶æ¦œå•ï¼ˆProphet ğŸ”®ï¼‰**
   - åˆ—åï¼š`#` | `ç©å®¶` | `é¢„æµ‹åœºæ•° / æ­£ç¡®ç‡` | `å˜åŒ–`
   - æ•°æ®ï¼šå®æ—¶é¢„æµ‹åœºæ•° + æ­£ç¡®ç‡è·³åŠ¨
   - ç¤ºä¾‹ï¼š`182 / 85%`

### 3. åç«¯æœåŠ¡å±‚æ›´æ–°

#### A. é‚€è¯·æœåŠ¡ï¼ˆ`inviteService.ts`ï¼‰

**æ–°å¢æ¥å£ï¼š**
```typescript
// è·å–æ‰¹é‡é¢†å–çš„ gas è´¹
async getGasFeeForBatchClaim(userId: string): Promise<number>

// æ‰¹é‡é¢†å–é‚€è¯·æ”¶ç›Šï¼ˆè¿”å› gas è´¹ï¼‰
async batchClaimInviteEarnings(userId: string): Promise<{
  success: boolean;
  amount: number;
  gasFee: number;  // æ–°å¢
  txHash?: string;
}>
```

**æ›´æ–°æ•°æ®ç»“æ„ï¼š**
```typescript
export interface InviteStats {
  totalInvites: number;
  activeTraders: number;
  pendingEarnings: number;
  totalEarnings: number;
  inviteCode: string;
  gasFee?: number;  // æ–°å¢ï¼šGas è´¹ï¼ˆTONï¼‰
}
```

#### B. æ¦œå•æœåŠ¡ï¼ˆ`rankingService.ts`ï¼‰

**æ›´æ–°æ•°æ®ç»“æ„ï¼š**
```typescript
export interface RankingEntry {
  rank: number;
  userId: string;
  username: string;
  score: number;
  delta: number;
  badge?: string;
  // å¸ƒé“è€…ä¸“ç”¨
  inviteEarnings?: number;
  // å¤§å¯Œè±ªä¸“ç”¨
  predictionEarnings?: number;
  // é¢„è¨€å®¶ä¸“ç”¨
  predictions?: number;
  accuracy?: number;
}
```

### 4. å›½é™…åŒ–æ›´æ–°

#### A. é‚€è¯·ä¸­å¿ƒï¼ˆ`invite.json`ï¼‰

**ä¸­æ–‡ï¼š**
```json
{
  "effect": {
    "title": "é‚€è¯·æ•ˆæœ",
    "subtitle": "æ·±åº¦è½¬åŒ–å¯è§†åŒ–",
    "steps": ["ç‚¹å‡»", "æ³¨å†Œ", "ä¸‹æ³¨", "ä½ èµš 1.5%"]
  },
  "actions": {
    "claim": "é›†ä¸­é¢†å–"
  },
  "withdraw": {
    "description": "è¯·é›†ä¸­é¢†å–ï¼Œä»…éœ€æ”¯ä»˜ä¸€æ¬¡ gas è´¹",
    "note": "é¢„è®¡ gas è´¹ï¼š{{gasFee}} TON",
    "gasFeeLabel": "Gas è´¹"
  }
}
```

**è‹±æ–‡ï¼š**
```json
{
  "effect": {
    "title": "Invite Effect",
    "subtitle": "Deep conversion visualization",
    "steps": ["Click", "Register", "Bet", "You earn 1.5%"]
  },
  "actions": {
    "claim": "Claim in Batch"
  },
  "withdraw": {
    "description": "Claim in batch, pay gas once",
    "note": "Estimated gas fee: {{gasFee}} TON",
    "gasFeeLabel": "Gas Fee"
  }
}
```

#### B. æ¦œå•ä¸­å¿ƒï¼ˆ`ranking.json`ï¼‰

**ä¸­æ–‡ï¼š**
```json
{
  "hero": {
    "title": "å®æ—¶è‹±é›„æ¦œï¼Œä½ è¡Œä½ ä¸Šæ¦œ",
    "subtitle": "å‰ 50 åå¯è§ Â· 60 ç§’åˆ·æ–°"
  },
  "live": {
    "columns": {
      "invite": ["#", "ç©å®¶", "é‚€è¯·æ”¶ç›Š", "å˜åŒ–"],
      "whale": ["#", "ç©å®¶", "é¢„æµ‹æ”¶ç›Š", "å˜åŒ–"],
      "prophet": ["#", "ç©å®¶", "é¢„æµ‹åœºæ•° / æ­£ç¡®ç‡", "å˜åŒ–"]
    },
    "heading": "å®æ—¶è‹±é›„æ¦œ"
  }
}
```

**è‹±æ–‡ï¼š**
```json
{
  "hero": {
    "title": "Live Hero Board, You Can Be On Top",
    "subtitle": "Top 50 visible Â· 60s refresh"
  },
  "live": {
    "columns": {
      "invite": ["#", "Player", "Invite Earnings", "Î”"],
      "whale": ["#", "Player", "Prediction Earnings", "Î”"],
      "prophet": ["#", "Player", "Predictions / Accuracy", "Î”"]
    },
    "heading": "Live Hero Board"
  }
}
```

## ğŸ“ æ–‡ä»¶å˜æ›´

### æ–°å¢æ–‡ä»¶
- `src/components/invite/InviteEffect.tsx` - é‚€è¯·æ•ˆæœç»„ä»¶

### æ›´æ–°æ–‡ä»¶
- `src/pages/Invite.tsx` - ç§»é™¤è¿”åˆ©æ¢¯åº¦ï¼Œæ·»åŠ  gas è´¹æ˜¾ç¤º
- `src/pages/Ranking.tsx` - æ›´æ–°åˆ—é…ç½®
- `src/components/ranking/RankingLive.tsx` - æ”¯æŒä¸åŒç±»å‹çš„åˆ—æ˜¾ç¤º
- `src/services/inviteService.ts` - æ·»åŠ  gas è´¹æ¥å£
- `src/services/rankingService.ts` - æ·»åŠ ä¸åŒç±»å‹çš„æ•°æ®å­—æ®µ
- `src/locales/zh/invite.json` - æ›´æ–°æ–‡æ¡ˆ
- `src/locales/en/invite.json` - æ›´æ–°æ–‡æ¡ˆ
- `src/locales/zh/ranking.json` - æ›´æ–°æ–‡æ¡ˆå’Œåˆ—é…ç½®
- `src/locales/en/ranking.json` - æ›´æ–°æ–‡æ¡ˆå’Œåˆ—é…ç½®

### ç§»é™¤å¼•ç”¨
- `InviteRewards` ç»„ä»¶ä¸å†ä½¿ç”¨ï¼ˆä½†æ–‡ä»¶ä¿ç•™ï¼‰
- `InviteFunnel` ç»„ä»¶é‡å‘½åä¸º `InviteEffect`

## ğŸ¯ æ ¸å¿ƒå˜æ›´ç‚¹

### 1. é‚€è¯·ä¸­å¿ƒ
- âŒ ç§»é™¤ï¼šè¿”åˆ©æ¢¯åº¦æ ç›®
- âœ… æ›´æ–°ï¼šé‚€è¯·æ¼æ–— â†’ é‚€è¯·æ•ˆæœ
- âœ… æ–°å¢ï¼šGas è´¹æ˜¾ç¤ºï¼ˆé‡‘è‰²é«˜äº®åŒºåŸŸï¼‰
- âœ… æ›´æ–°ï¼šé¢†å–æŒ‰é’®æ–‡æ¡ˆ

### 2. æ¦œå•ä¸­å¿ƒ
- âœ… æ›´æ–°ï¼šå¤´éƒ¨æ–‡æ¡ˆã€Œå®æ—¶è‹±é›„æ¦œï¼Œä½ è¡Œä½ ä¸Šæ¦œã€
- âœ… æ›´æ–°ï¼šæ¦œå•æ ‡é¢˜ã€Œå®æ—¶è‹±é›„æ¦œã€
- âœ… æ–°å¢ï¼šä¸åŒç±»å‹æ˜¾ç¤ºä¸åŒåˆ—
  - å¸ƒé“è€…ï¼šé‚€è¯·æ”¶ç›Š
  - å¤§å¯Œè±ªï¼šé¢„æµ‹æ”¶ç›Š
  - é¢„è¨€å®¶ï¼šé¢„æµ‹åœºæ•° / æ­£ç¡®ç‡

### 3. æœåŠ¡å±‚
- âœ… æ–°å¢ï¼š`getGasFeeForBatchClaim()` æ¥å£
- âœ… æ›´æ–°ï¼š`batchClaimInviteEarnings()` è¿”å› gas è´¹
- âœ… æ›´æ–°ï¼š`InviteStats` æ·»åŠ  `gasFee` å­—æ®µ
- âœ… æ›´æ–°ï¼š`RankingEntry` æ·»åŠ ç±»å‹ä¸“ç”¨å­—æ®µ

## âœ… éªŒæ”¶æ ‡å‡†

### é‚€è¯·ä¸­å¿ƒ
- âœ… è®¿é—® `/invite` â†’ æ— è¿”åˆ©æ¢¯åº¦æ ç›®
- âœ… æ˜¾ç¤ºã€Œé‚€è¯·æ•ˆæœã€æ·±åº¦è½¬åŒ–å¯è§†åŒ–
- âœ… æ˜¾ç¤º gas è´¹ï¼ˆé‡‘è‰²é«˜äº®ï¼‰
- âœ… é¢†å–æŒ‰é’®æ–‡æ¡ˆï¼šã€Œé›†ä¸­é¢†å–ã€/ã€ŒClaim in Batchã€
- âœ… æç¤ºæ–‡æ¡ˆï¼šã€Œè¯·é›†ä¸­é¢†å–ï¼Œä»…éœ€æ”¯ä»˜ä¸€æ¬¡ gas è´¹ã€

### æ¦œå•ä¸­å¿ƒ
- âœ… å¤´éƒ¨æ–‡æ¡ˆï¼šã€Œå®æ—¶è‹±é›„æ¦œï¼Œä½ è¡Œä½ ä¸Šæ¦œã€
- âœ… æ¦œå•æ ‡é¢˜ï¼šã€Œå®æ—¶è‹±é›„æ¦œã€
- âœ… å¸ƒé“è€…æ¦œå•ï¼šæ˜¾ç¤ºã€Œé‚€è¯·æ”¶ç›Šã€
- âœ… å¤§å¯Œè±ªæ¦œå•ï¼šæ˜¾ç¤ºã€Œé¢„æµ‹æ”¶ç›Šã€
- âœ… é¢„è¨€å®¶æ¦œå•ï¼šæ˜¾ç¤ºã€Œé¢„æµ‹åœºæ•° / æ­£ç¡®ç‡ã€

## ğŸ“Š æ„å»ºç»“æœ

```bash
âœ“ 3167 modules transformed
âœ“ built in 18.68s
âœ“ 0 errors in new code
```

## ğŸ¨ UI å˜æ›´

### é‚€è¯·ä¸­å¿ƒå¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‹±é›„åŒºï¼ˆå®æ—¶æ”¶ç›Šè·³åŠ¨ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é‚€è¯·æ‘˜è¦              â”‚ æ”¶ç›Šé¢†å–          â”‚
â”‚                      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ é‚€è¯·æ•ˆæœï¼ˆæ·±åº¦è½¬åŒ–ï¼‰   â”‚ â”‚ å¾…é¢†å–       â”‚ â”‚
â”‚                      â”‚ â”‚ 420 TAI      â”‚ â”‚
â”‚ é‚€è¯·å†å²              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚ â”‚ Gas è´¹       â”‚ â”‚
â”‚                      â”‚ â”‚ 0.050 TON    â”‚ â”‚
â”‚                      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚ [é›†ä¸­é¢†å–]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¦œå•ä¸­å¿ƒå¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®æ—¶è‹±é›„æ¦œï¼Œä½ è¡Œä½ ä¸Šæ¦œ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å¸ƒé“è€…ğŸ§™] [å¤§å¯Œè±ªğŸ’°] [é¢„è¨€å®¶ğŸ”®]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®æ—¶è‹±é›„æ¦œ            â”‚ åˆ†äº«é«˜å…‰          â”‚
â”‚ # | ç©å®¶ | æ•°æ® | Î”  â”‚                  â”‚
â”‚ 1 | xxx  | xxx  | +x â”‚                  â”‚
â”‚ 2 | xxx  | xxx  | +x â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ æŠ€æœ¯äº®ç‚¹

1. **é›¶é‡æ„** - å¤ç”¨ç°æœ‰ç»„ä»¶å’Œæ ·å¼
2. **Gas è´¹é€æ˜** - ç”¨æˆ·è‡ªä»˜ gasï¼Œæ˜¾ç¤ºé¢„ä¼°è´¹ç”¨
3. **ç±»å‹åŒ–åˆ—** - ä¸åŒæ¦œå•æ˜¾ç¤ºä¸åŒæ•°æ®
4. **æ·±åº¦è½¬åŒ–** - é‚€è¯·æ•ˆæœå¯è§†åŒ–
5. **ä¸­è‹±åŒè¯­** - å®Œæ•´å›½é™…åŒ–æ”¯æŒ

---

**ä¸€å¥è¯æ€»ç»“ï¼šé‚€è¯·è¿”åˆ© + å®æ—¶æ¦œå•æ·±åº¦ä¼˜åŒ– V2 å®Œæˆï¼Œç§»é™¤è¿”åˆ©æ¢¯åº¦ï¼Œæ·»åŠ  gas è´¹æ˜¾ç¤ºï¼Œæ¦œå•æ”¯æŒä¸åŒç±»å‹æ•°æ®å±•ç¤ºã€‚**
