# DAO æ’å…¥å¼ç»„ä»¶é›†æˆæŒ‡å—

## ğŸ“‹ æ¦‚è§ˆ

**ç›®æ ‡ï¼š** é›¶é‡æ„ï¼Œé€šè¿‡æ’å…¥å¼ç»„ä»¶å®ç° DAO åŠŸèƒ½æ·±åº¦é›†æˆ  
**æ–¹å¼ï¼š** ä»…åœ¨ç°æœ‰é¡µé¢æ’å…¥å°å‹ç»„ä»¶ï¼Œä¸ä¿®æ”¹ç°æœ‰é€»è¾‘  
**æ–‡ä»¶ï¼š** 5 ä¸ªæ–°æ–‡ä»¶ï¼Œ3 å¤„æ’å…¥ç‚¹

---

## ğŸ“¦ æ–°å¢æ–‡ä»¶æ¸…å•

### 1. æ’å…¥å¼ç»„ä»¶ï¼ˆ3 ä¸ªæ–‡ä»¶ï¼‰

```
src/components/insert/
â”œâ”€â”€ DaoPoolCard.tsx      - DAO æ± å¡ç‰‡ï¼ˆæ’å…¥èµ„äº§é¡µï¼‰
â”œâ”€â”€ HomeDaoBadge.tsx     - é‡‘è‰²é”¤å¾½ç« ï¼ˆæ’å…¥é¦–é¡µå¡ç‰‡ï¼‰
â””â”€â”€ DaoClaimBtn.tsx      - é¢†å–æŒ‰é’®ï¼ˆæ’å…¥æ¦œå•é¡µï¼‰
```

### 2. å·¥å…·å‡½æ•°ï¼ˆ2 ä¸ªæ–‡ä»¶ï¼‰

```
src/
â”œâ”€â”€ utils/dao.ts         - DAO å·¥å…·å‡½æ•°
â””â”€â”€ queries/dao.ts       - DAO æŸ¥è¯¢é’©å­
```

---

## ğŸ”§ æ’å…¥æ­¥éª¤

### æ­¥éª¤ 1ï¼šæ’å…¥ DAO æ± å¡ç‰‡åˆ°èµ„äº§é¡µ

**æ–‡ä»¶ï¼š** `src/pages/Assets.tsx`

**æ’å…¥ä½ç½®ï¼š** é¡µé¢åº•éƒ¨ï¼Œæœ€åä¸€ä¸ªç»„ä»¶ä¹‹å

```tsx
import { DaoPoolCard } from '../components/insert/DaoPoolCard';

export function Assets() {
  return (
    <PageLayout>
      <div className="space-y-6 pb-32 lg:pb-6">
        {/* ç°æœ‰å†…å®¹ */}
        <UserBalance />
        <AssetList />
        
        {/* ğŸ‘‡ æ’å…¥è¿™ä¸€è¡Œ */}
        <DaoPoolCard />
      </div>
    </PageLayout>
  );
}
```

**æ•ˆæœï¼š**
- æ˜¾ç¤º DAO æ€»æ± å’Œç”¨æˆ·å¯é¢†å–é‡‘é¢
- å®æ—¶æ•°å­—æ»šåŠ¨åŠ¨æ•ˆ
- ä¸€é”®é¢†å–æŒ‰é’®
- ç»ç’ƒè´¨æ„Ÿè®¾è®¡

---

### æ­¥éª¤ 2ï¼šæ’å…¥é‡‘è‰²é”¤å¾½ç« åˆ°é¦–é¡µå¡ç‰‡

**æ–‡ä»¶ï¼š** `src/components/market/MarketCard.tsx` æˆ–ç±»ä¼¼çš„å¡ç‰‡ç»„ä»¶

**æ’å…¥ä½ç½®ï¼š** å¡ç‰‡åº•éƒ¨ï¼Œå‚ä¸äººæ•°æ—è¾¹

```tsx
import { HomeDaoBadge } from '../insert/HomeDaoBadge';

export function MarketCard({ bet }: Props) {
  return (
    <div className="card">
      <div className="card-header">
        <h3>{bet.title}</h3>
      </div>
      
      <div className="card-footer">
        <div className="participants">{bet.participants} äººå‚ä¸</div>
        
        {/* ğŸ‘‡ æ’å…¥è¿™ä¸€è¡Œ */}
        <HomeDaoBadge betId={bet.id} />
      </div>
    </div>
  );
}
```

**æ•ˆæœï¼š**
- æ˜¾ç¤ºé™ªå®¡å‘˜æ•°é‡
- é‡‘è‰²é”¤å›¾æ ‡é—ªçƒ
- å®æ—¶æ›´æ–°ï¼ˆ30ç§’ï¼‰

---

### æ­¥éª¤ 3ï¼šæ’å…¥é¢†å–æŒ‰é’®åˆ°æ¦œå•é¡µ

**æ–‡ä»¶ï¼š** `src/pages/Ranking.tsx`

**æ’å…¥ä½ç½®ï¼š** é‚€è¯·æ”¶ç›Šå¡ç‰‡å³ä¾§æˆ–åº•éƒ¨

```tsx
import { DaoClaimBtn } from '../components/insert/DaoClaimBtn';

export function Ranking() {
  return (
    <PageLayout>
      <div className="space-y-6 pb-32 lg:pb-6">
        {/* ç°æœ‰å†…å®¹ */}
        <RankingLive />
        
        <div className="flex items-center gap-3">
          <InviteEarnings />
          
          {/* ğŸ‘‡ æ’å…¥è¿™ä¸€è¡Œ */}
          <DaoClaimBtn />
        </div>
      </div>
    </PageLayout>
  );
}
```

**æ•ˆæœï¼š**
- æ˜¾ç¤ºå¾…é¢†å– DAO æ”¶ç›Š
- ä¸€é”®é¢†å–æŒ‰é’®
- é‡‘è‰²ç»ç’ƒè´¨æ„Ÿ

---

## ğŸ¨ è®¾è®¡è§„èŒƒ

### ç»ç’ƒè´¨æ„Ÿæ ·å¼

æ‰€æœ‰æ’å…¥å¼ç»„ä»¶éƒ½ä½¿ç”¨ç»Ÿä¸€çš„ç»ç’ƒè´¨æ„Ÿè®¾è®¡ï¼š

```tsx
className="
  rounded-2xl 
  border border-amber-400/20 
  bg-gray-900/50 
  backdrop-blur-md 
  shadow-2xl
"
```

### é‡‘è‰²ä¸»é¢˜

- ä¸»è‰²ï¼š`#F59E0B` (amber-400)
- è¾¹æ¡†ï¼š`border-amber-400/20`
- èƒŒæ™¯ï¼š`bg-amber-400/10`
- æ–‡å­—ï¼š`text-amber-400`

### åŠ¨æ•ˆ

- æ•°å­—æ»šåŠ¨ï¼šä½¿ç”¨ `useCountUp` hook
- é—ªçƒï¼š`animate-pulse`
- å®æ—¶æŒ‡ç¤ºå™¨ï¼š`animate-pulse` + å°åœ†ç‚¹
- æŒ‰é’®ï¼š`active:scale-95` + `hover:shadow-lg`

---

## ğŸ”Œ API é›†æˆ

### éœ€è¦å®ç°çš„ API ç«¯ç‚¹

```typescript
// 1. è·å–é™ªå®¡å‘˜å¾½ç« 
GET /api/dao/badge/:betId
Response: { juryCount: number }

// 2. è·å– DAO æ± ç»Ÿè®¡
GET /api/dao/pool-stats
Response: { total: number }

// 3. è·å–ç”¨æˆ·å¾…é¢†å–é‡‘é¢
GET /api/dao/pending/:userId
Response: { pendingAmount: number }

// 4. é¢†å– DAO æ”¶ç›Š
POST /api/dao/claim
Body: { userId: string }
Response: { success: boolean, claimedAmount: number, txHash: string }
```

### ä¸´æ—¶ Mock æ•°æ®

åœ¨ API æœªå®ç°å‰ï¼Œç»„ä»¶ä¼šä½¿ç”¨éšæœºæ•°æ®ï¼š

```typescript
// ä¸´æ—¶æ•°æ®ç”Ÿæˆ
setTotalPool(Math.floor(Math.random() * 1000000));
setPendingAmount(Math.floor(Math.random() * 10000));
setJuryCount(Math.floor(Math.random() * 5));
```

---

## âœ… éªŒè¯æ¸…å•

### åŠŸèƒ½éªŒè¯

- [ ] DAO æ± å¡ç‰‡åœ¨èµ„äº§é¡µæ­£ç¡®æ˜¾ç¤º
- [ ] é‡‘è‰²é”¤å¾½ç« åœ¨é¦–é¡µå¡ç‰‡æ­£ç¡®æ˜¾ç¤º
- [ ] é¢†å–æŒ‰é’®åœ¨æ¦œå•é¡µæ­£ç¡®æ˜¾ç¤º
- [ ] æ•°å­—æ»šåŠ¨åŠ¨æ•ˆæ­£å¸¸å·¥ä½œ
- [ ] é¢†å–åŠŸèƒ½æ­£å¸¸è§¦å‘
- [ ] Confetti åŠ¨æ•ˆæ­£å¸¸æ˜¾ç¤º

### æ ·å¼éªŒè¯

- [ ] ç»ç’ƒè´¨æ„Ÿæ­£ç¡®æ¸²æŸ“
- [ ] é‡‘è‰²ä¸»é¢˜ç»Ÿä¸€
- [ ] ç§»åŠ¨ç«¯é€‚é…æ­£å¸¸
- [ ] æš—è‰²æ¨¡å¼æ­£å¸¸
- [ ] åŠ¨æ•ˆæµç•…

### æ€§èƒ½éªŒè¯

- [ ] ç»„ä»¶åŠ è½½æ—¶é—´ < 100ms
- [ ] æ•°æ®åˆ·æ–°é—´éš” 30 ç§’
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] æ— æ ·å¼å†²çª

---

## ğŸ§ª æµ‹è¯•å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®æµ‹è¯•é¡µé¢
# èµ„äº§é¡µï¼šhttp://localhost:5173/assets
# é¦–é¡µï¼šhttp://localhost:5173/
# æ¦œå•é¡µï¼šhttp://localhost:5173/ranking

# æ£€æŸ¥ç»„ä»¶æ¸²æŸ“
npm run test:insert

# æ£€æŸ¥æ ·å¼å†²çª
npm run test:ui

# æ£€æŸ¥æŸ¥è¯¢é’©å­
npm run test:query
```

---

## ğŸ¯ ä¼˜åŠ¿

### é›¶é‡æ„
- âœ… ä¸ä¿®æ”¹ç°æœ‰ç»„ä»¶
- âœ… ä¸ä¿®æ”¹ç°æœ‰è·¯ç”±
- âœ… ä¸ä¿®æ”¹ç°æœ‰ API
- âœ… ä»…æ’å…¥æ–°ç»„ä»¶

### è½»é‡åŒ–
- âœ… å•ç»„ä»¶ < 80 è¡Œ
- âœ… å•æ–‡ä»¶ < 3 KB
- âœ… æ— é¢å¤–ä¾èµ–
- âœ… æŒ‰éœ€åŠ è½½

### å¯ç»´æŠ¤
- âœ… ç‹¬ç«‹æ–‡ä»¶
- âœ… æ¸…æ™°å‘½å
- âœ… å®Œæ•´æ³¨é‡Š
- âœ… æ˜“äºç§»é™¤

### é«˜æ€§èƒ½
- âœ… 30 ç§’åˆ·æ–°
- âœ… é˜²æŠ–å¤„ç†
- âœ… ä¹è§‚æ›´æ–°
- âœ… ç¼“å­˜ç­–ç•¥

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœéœ€è¦ç§»é™¤æ’å…¥å¼ç»„ä»¶ï¼š

```bash
# 1. åˆ é™¤æ’å…¥çš„ä»£ç è¡Œ
# åœ¨ Assets.tsx ä¸­åˆ é™¤ï¼š<DaoPoolCard />
# åœ¨ MarketCard.tsx ä¸­åˆ é™¤ï¼š<HomeDaoBadge betId={bet.id} />
# åœ¨ Ranking.tsx ä¸­åˆ é™¤ï¼š<DaoClaimBtn />

# 2. åˆ é™¤æ–°å¢æ–‡ä»¶
rm -rf src/components/insert/
rm src/utils/dao.ts
rm src/queries/dao.ts

# 3. é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

### çŸ­æœŸï¼ˆ1-2 å¤©ï¼‰
- [ ] å®ç°çœŸå®çš„ API ç«¯ç‚¹
- [ ] é›†æˆ TON Connect
- [ ] æ·»åŠ äº¤æ˜“ç­¾å
- [ ] å®Œå–„é”™è¯¯å¤„ç†

### ä¸­æœŸï¼ˆ1 å‘¨ï¼‰
- [ ] æ·»åŠ æ›´å¤šåŠ¨æ•ˆ
- [ ] ä¼˜åŒ–æ€§èƒ½
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å®Œå–„æ–‡æ¡£

### é•¿æœŸï¼ˆ1 æœˆï¼‰
- [ ] æ·»åŠ  DAO æ²»ç†
- [ ] æ·»åŠ é™ªå®¡å‘˜ç³»ç»Ÿ
- [ ] æ·»åŠ ç­‰çº§ä½“ç³»
- [ ] æ·»åŠ æ•°æ®åˆ†æ

---

## ğŸ‰ æ€»ç»“

**å®æ–½æ–¹å¼ï¼š** æ’å…¥å¼ç»„ä»¶ï¼Œé›¶é‡æ„  
**æ–°å¢æ–‡ä»¶ï¼š** 5 ä¸ª  
**æ’å…¥ç‚¹ï¼š** 3 å¤„  
**ä»£ç è¡Œæ•°ï¼š** ~300 è¡Œ  
**å®æ–½æ—¶é—´ï¼š** 30 åˆ†é’Ÿ  

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- âœ… é›¶é‡æ„ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… è½»é‡åŒ–ï¼Œå•ç»„ä»¶ < 80 è¡Œ
- âœ… ç»ç’ƒè´¨æ„Ÿï¼Œç»Ÿä¸€è®¾è®¡è¯­è¨€
- âœ… å®æ—¶åŠ¨æ•ˆï¼Œæå‡ç”¨æˆ·ä½“éªŒ

**ç«‹å³å¼€å§‹ï¼š**
1. å¤åˆ¶ 5 ä¸ªæ–‡ä»¶åˆ°å¯¹åº”ç›®å½•
2. åœ¨ 3 ä¸ªé¡µé¢å„æ’å…¥ 1 è¡Œä»£ç 
3. è¿è¡Œ `npm run dev`
4. è®¿é—®é¡µé¢éªŒè¯æ•ˆæœ

---

**åˆ›å»ºæ—¶é—´ï¼š** 2025-11-01  
**ç‰ˆæœ¬ï¼š** v2.0 æ’å…¥å¼  
**çŠ¶æ€ï¼š** âœ… å®Œæˆ
